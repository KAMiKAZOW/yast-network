/**
 * File:	providers.scr
 * Summary:	SCR agent for dialup providers
 * Authors:	Petr Blahos <pblahos@suse.cz>, Michal Svec <msvec@suse.cz>
 * Access:	read-only
 * See:		yast2-config-network package
 *
 * General syntax:
 *	# comment
 *	[Section name]
 *	Key = value
 *	Another key = another value
 *
 * $Id$
 *
 * <p>Reads dialup providers from files
 * /usr/share/providers/*.wvdial.conf.</p>
 */
.providers

`ag_ini(
    IniAgent( [ "/usr/share/providers/*.conf",  ],
	$[
	    /* read-only */
	    "options"	: [ "read_only" ],
	    /* empty lines and whole-line comments */
	    "comments"	: [ "^[ \t]*$", "^[ \t]*#.*" ],
	    /* matching rules */
	    "sections"	: [
		$[
		    "begin" : [ "[ \t]*\\[Dialer[ \t]+(.*[^ \t])[ \t]*\\][ \t]*", "[Dialer %s]" ],
		],
		],
		    "params" : [
		$[
		    "match" : [ "^[ \t]*([^=]*[^ \t=])[ \t]*=[ \t]*\"([^\"]*)\"[ \t]*$" , "%s=\"%s\""],
		],
	    ],
	    /* rewrite rules */
	    "rewrite"	: [
		[ "/usr/share/providers/(.*)\.conf$",  "/usr/share/providers/%s.conf", ],
	    ],
	]
    )
)
